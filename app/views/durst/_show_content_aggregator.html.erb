<%
	# NOTE: THIS FILE IS TEMPORARY!  The customizations below are only for the November 2014 Durst demo!
    fav_img_present = document['image_filename_ssm'].present?
%>

<div class="row" id="child_items">
  <div id="item-description" class="col-md-3">
	<div class="inner" style="margin-bottom:1em;">
		<script>
			DCV.centerLat = 40.7400;
			DCV.centerLong = -73.9802;
			DCV.mapPlanes = <%= get_map_data_for_document_list([document]).to_json.html_safe %>;
			DCV.mapCoordinateSearchUrl = '<%= CGI.escape(url_for(params.merge(:lat => '_lat_', :long => '_long_', :search_field => params[:search_field] || 'all_text_teim', :q => params[:q] || ''))) %>';
		</script>
		<div id="durst_osm" class="no-popup"></div>
	  <div class="clearfix"></div>
	</div>
    <% if fav_img_present %>
      <% # TEMP OVERRIDE FOR PLACEHOLDER DURST IMAGES %>
  <div class="inner">
    <dl class="dl-vertical">
      <% document_show_fields(document).each do |solr_fname, field| %>
        <% if should_render_show_field? document, field %>
          <dt class="blacklight-<%= solr_fname.parameterize %>"><%= render_document_show_field_label document, :field => solr_fname %></dt>
          <dd class="blacklight-<%= solr_fname.parameterize %>"><%= render_document_show_field_value document, :field => solr_fname %></dd>
        <% end %>
      <% end %>
    </dl>
   </div>
    <% end %>
    <div class="inner">
      <%= link_to '<span class="glyphicon glyphicon-file"></span> Display XML Metadata'.html_safe, item_mods_path(:pid => @document.id), :'data-no-turbolink' => true, :'data-display-url' => item_mods_path(:pid => @document.id, :type => 'formatted_text'), :'data-download-url' => item_mods_path(:pid => @document.id, :type => 'download'), :onclick => 'return DCV.ModsDownloadModal.show($(this).attr("data-display-url"), $(this).attr("data-download-url"));' %>
    </div>
  </div>
  <div class="col-md-9">
   <div class="inner">
     <h3 id="doc-item-title" class="nomar">
       <%= '<i class="glyphicon glyphicon-book pull-left"></i>&nbsp;'.html_safe if !fav_img_present %>
       <%= document_show_html_title %>
     </h3>
     <% if ct = structured_children.first %>
       <p id="ct"><%= ct[:title] %></p>
     <% end %>
    <% if fav_img_present %>
      <% # TEMP OVERRIDE FOR PLACEHOLDER DURST IMAGES %>
      <div id="favorite-child">
          <br />
          <img itemprop="contentUrl" src="<%= 'https://ldpd.cul.columbia.edu/durst-temp-images/768/' + document['image_filename_ssm'][0].gsub(/\.[Tt][Ii][Ff][Ff]*/, '.jpg') %>" data-counter="1" data-sequence="0" />
      </div>
    <% end %>
    <%= render_document_partials @document, ['gallery'] %>
    </div>
    <% if !fav_img_present %>
      <% # TEMP OVERRIDE FOR PLACEHOLDER DURST IMAGES %>
  <div class="inner" style="margin-top:1em;">
    <dl class="dl-horizontal">
      <% document_show_fields(document).each do |solr_fname, field| %>
        <% if should_render_show_field? document, field %>
          <dt class="blacklight-<%= solr_fname.parameterize %>"><%= render_document_show_field_label document, :field => solr_fname %></dt>
          <dd class="blacklight-<%= solr_fname.parameterize %>"><%= render_document_show_field_value document, :field => solr_fname %></dd>
        <% end %>
      <% end %>
    </dl>
   </div>
    <% end %>
  </div>
</div>
